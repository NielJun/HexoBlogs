---
title: ShaderGraph无贴图自制蓝色火焰
date: 2020-01-23 23:55:52
tags:
categories: 游戏栈
---

![](/png12.png)

## ShaderGraph学习之一  不使用贴图制作火焰效果

在制作火焰效果时，我们可以使用粒子系统加贴图等方式制作简单的火焰效果，但是今天我使用shadergraph在不使用贴图情况下制作蓝色小火焰。

![](png1.png)

制作思路：

1. 使用Lerp噪声节点，然和多层混合颜色数据
2. 使用自带的voronoi节点制作扭动效果
3. 配合Time节点制作uv流动
4. Distance配合UV制作蔗罩，配合制作图形
5. remap，clamp，power配合处理计算数据

Let `s do it。

首先新建一个无光照的Shader，将主节点的透明模式改为Transparent透明模式。

![](/png9.png)

在这里先介绍Voronoi节点，这个节点是噪声节点下面的一个节点，效果时制作像泡泡一样的扭动的团噪。

![](/png2.png)

可以使用UV的TillingAndOffset节点让该噪声节点让上滚动，只需要将TillingAndOffset的Y分量让Time的节点作为输入即可。

![](/png3.png)

这样UV的滚动效果就呈现了，接着我们做两份重复的滚动UV只是参数不一样。

![](/png4.png)

接着我们对它们做一个Blend混合：

![](/png5.png)

接下来们需要把火焰的上半部分进行裁剪，由于现在效果时四方形，我们通过下面的节点做一个遮罩：

![](/png6.png)

解释一下：Distance节点是做某点在UV上面的映射距离计算的，而UV其实是贴图对于模型以 0.0-1.0 的比例进行映射的，打个比方，在一个2D坐标系里面UV的映射取值范围： U:(0.0f-1.0f),V(0.0f-1.0f)，模型的颜色就是通过坐标点的颜色值进行取样映射的。接着我们对得到的图像进行Remap将其映射到指定的范围得到一个上半圆的遮罩图形。通过Power(次方)节点进行虚化。

然后将其Add成一个图形，就会把以前的UV滚动的上半部分进行遮罩覆盖。

![](/png7.png)

最后做火焰内外颜色的交替，其实就是用Lerp节点对外焰颜色(偏暗)和内焰颜色(偏亮)进行差值，差值系数就是Add和面的节点，其实这个节点最后是传给Alpha所以本身混合后就是一张0-1随机的贴图，我们通过clamp节点是保证值取值范围是0-1，然后Step节点是一个筛选节点，设置的值假设为0.8则贴图上所有没达到0.8的统统视作0处理，因为这样的话我们就可以找出内焰的区域，并加上颜色。

![](/png8.png)

当然这里面的一些参数自己都可以设置。最后说一下，主节点最下面的值的含义，其实是一个Alpha的阈值，也想相当于一个alpha测试的阈值，当Alpha通道输入的值小于它的时候，直接进行裁剪。

![](/png10.png)

最后面附上所有的节点图：

![](/png11.png)

可喜可贺，新年大吉！